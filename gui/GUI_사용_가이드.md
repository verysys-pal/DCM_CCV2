# DCM 크라이오쿨러 GUI 사용 가이드

## 개요

DCM 크라이오쿨러 시스템의 CSS Phoebus GUI는 한국어 인터페이스를 제공하며, 시스템의 모니터링, 제어, 알람 관리를 위한 통합 환경을 제공합니다.

## GUI 구성

### 1. 메인 대시보드 (main.bob)

메인 대시보드는 시스템의 전체적인 상태를 한눈에 볼 수 있는 화면입니다.

#### 주요 구성 요소:

**시스템 상태 패널:**
- 현재 시스템 상태 (OFF, INIT, PRECOOL, RUN, HOLD, WARMUP, SAFE_SHUTDOWN)
- 상태 LED (녹색: 정상, 빨간색: 알람)
- 운전 시간 표시
- LN2 공급 상태
- 압축기 상태

**제어 버튼 패널:**
- 시작: 시스템 시작
- 정지: 시스템 정지
- 홀드: 현재 상태 유지
- 재개: 홀드 상태에서 재개
- 웜업: 웜업 프로세스 시작
- 비상정지: 즉시 안전 정지
- 알람 확인: 활성 알람 확인

**KPI (주요 성능 지표) 패널:**
- Cold Head 온도 (K)
- T5, T6 온도 (K)
- PT1, PT3 압력 (bar)
- LN2 레벨 (%)
- 유량 FT18 (L/min)
- 냉각 파워 (W)
- 시스템 효율 (%)

**트렌드 차트:**
- 온도 트렌드: Cold Head, T5, T6 온도의 시간별 변화
- 압력 트렌드: PT1, PT3 압력의 시간별 변화

**알람 패널:**
- 현재 활성 알람 목록
- 알람 확인 기능

### 2. P&ID 화면 (cryocooler_pid.bob, cryocooler_pid_enhanced.bob)

Cryocooler_image2.jpg와 90% 이상 동일하게 구현된 P&ID(Piping and Instrumentation Diagram) 화면입니다.

#### 주요 구성 요소:

**시스템 레이아웃:**
- DCM (Double Crystal Monochromator) 중앙 박스
- HEATER VESSEL (녹색 박스)
- SUBCOOLER (파란색 박스)
- LN2 Pump

**온도 센서:**
- T5: DCM 좌측 온도 센서 (K)
- T6: DCM 우측 온도 센서 (K)
- 실시간 온도 값 표시

**압력 센서:**
- PT1: Sub-cooler LN2 supply valve 근처 압력 (bar)
- PT3: Heater vessel 내부 압력 (bar)

**레벨 센서:**
- LT19: DCM LN2 supply valve 근처 레벨 (%)
- LT23: Heater vessel 내부 레벨 (%)

**유량 센서:**
- FT18: DCM LN2 recovery valve 근처 유량 (L/min)

**밸브 시스템:**
- V21 (PURGE): Drain & purge valve
- V9: Sub-cooler LN2 supply valve
- V19: DCM LN2 supply valve
- V15: Heater vessel 연결 밸브
- V20: Heater vessel LN2 supply valve
- V17: Heater vessel pressure control valve
- V11: DCM (closed loop) pressure control valve

**파이프라인:**
- 파란색 굵은 선으로 LN2 공급 라인 표시
- 주요 연결부와 분기점 표시
- 실제 시스템과 동일한 배관 구조

**제어 패널 (좌측):**
- System, READY, Cool Down, Warm Up, Refill 버튼
- 알람 표시기 (⚠ 마크)
- STOP OFF 비상정지 버튼

**하단 제어 패널:**
- Alarm, Main Window, Expert Mode, Operator Mode 버튼
- SYSTEM 버튼
- BRUKER 로고

**라벨 및 설명:**
- 모든 구성요소에 대한 영문/한글 라벨
- 센서 위치 및 기능 설명
- 화살표로 연결된 설명선

### 3. 시놉틱 뷰 (synoptic.bob)

시스템의 물리적 레이아웃과 실시간 상태를 시각적으로 표시합니다.

#### 주요 구성 요소:

**시스템 이미지:**
- Cryocooler_image1.png 기반 시스템 레이아웃
- 실시간 센서 데이터 오버레이

**센서 표시:**
- 온도 센서 (T5, T6, Cold Head): 사각형 박스, 노란색 배경
- 압력 센서 (PT1, PT3): 원형, 녹색 배경
- 실시간 값과 단위 표시

**밸브 제어 패널:**
- V9 (퍼지 밸브)
- V15, V19, V20, V21, V24
- 각 밸브의 상태 LED와 토글 버튼

**장비 제어:**
- 압축기: 상태 표시 및 제어
- 순환 펌프: 상태 표시 및 제어
- 히터: 상태 표시, 제어, 출력 표시

**레벨 및 유량 표시:**
- LT19, LT23 레벨 센서 (%)
- FT18 유량 센서 (L/min)

**범례:**
- 녹색 LED: 정상/열림
- 회색 LED: 정지/닫힘
- 빨간색 LED: 알람/고장
- 주황색 LED: 히터/가열
- 사각형: 온도 센서
- 원형: 압력 센서

### 3. 알람 및 진단 화면 (alarm.bob)

알람 관리와 시스템 진단 정보를 제공합니다.

#### 주요 구성 요소:

**현재 알람 상태:**
- 활성 알람 수
- 미확인 알람 수
- 최고 심각도
- 시스템 상태
- 마지막 알람 시간

**제어 버튼:**
- 모든 알람 확인
- 알람 음소거
- 알람 테스트

**활성 알람 테이블:**
- 시간, 심각도, PV 이름, 알람 메시지
- 현재 값, 한계값, 상태
- 개별 알람 확인 기능

**알람 히스토리:**
- 발생/해제 시간, 지속 시간
- 필터링 기능 (심각도, 시간 범위)
- 새로고침 및 내보내기 기능

**진단 정보:**
- 센서 상태, 밸브 상태, 장비 상태
- 통신 상태
- CPU/메모리 사용률
- 시스템 업타임

### 4. 알람 설정 화면 (alarm_config.bob)

알람 한계값과 설정을 조정할 수 있는 화면입니다.

#### 주요 구성 요소:

**온도 알람 설정:**
- Cold Head, T5, T6 온도의 최소/최대 한계값
- 온도 변화율 한계값

**압력 알람 설정:**
- PT1, PT3 압력의 최소/최대 한계값
- 안전 밸브 압력 설정

**레벨 및 유량 알람 설정:**
- LN2 최소 레벨
- 최소 유량
- 유량 손실 허용 시간

**알람 설정:**
- 알람 활성화/비활성화
- 소리 알람, 이메일 알림
- 자동 확인 기능
- 설정 저장 및 기본값 복원

## 사용 방법

### 1. 시스템 시작

1. 메인 대시보드에서 시스템 상태가 "OFF"인지 확인
2. LN2 공급 상태가 정상(녹색)인지 확인
3. "시작" 버튼 클릭
4. 시스템이 INIT → PRECOOL → RUN 순서로 전환되는지 모니터링

### 2. P&ID 화면 모니터링

1. 메인 대시보드에서 "P&ID 화면" 버튼 클릭
2. 실시간 센서 데이터 확인:
   - 온도 센서 (T5, T6): 정상 범위 4-300K
   - 압력 센서 (PT1, PT3): 정상 범위 0-2 bar
   - 레벨 센서 (LT19, LT23): 정상 범위 20-80%
   - 유량 센서 (FT18): 정상 범위 0.5-5 L/min
3. 밸브 상태 모니터링:
   - 열린 밸브: 파란색 표시
   - 닫힌 밸브: 회색 표시
4. 시스템 전체 흐름 파악:
   - LN2 공급 라인 추적
   - 압력 및 온도 분포 확인
   - 비정상 상황 신속 파악

1. KPI 패널에서 주요 온도, 압력, 레벨 값 확인
2. 트렌드 차트에서 시간별 변화 추이 모니터링
3. 시놉틱 뷰에서 전체 시스템 상태 확인
4. 알람 패널에서 경고 사항 확인

### 3. 알람 처리

1. 알람 발생 시 빨간색 LED와 소리로 알림
2. 알람 화면에서 상세 정보 확인
3. 원인 파악 후 "알람 확인" 버튼 클릭
4. 필요시 "음소거" 버튼으로 소리 알람 중지

### 4. 비상 상황 대응

1. 비상 상황 발생 시 "비상정지" 버튼 클릭
2. 시스템이 SAFE_SHUTDOWN 상태로 전환
3. 알람 화면에서 원인 분석
4. 안전 확인 후 시스템 재시작

### 5. 설정 변경

1. 알람 설정 화면에서 한계값 조정
2. "설정 저장" 버튼으로 변경사항 저장
3. 필요시 "기본값 복원"으로 초기 설정 복원

## 색상 코딩

- **녹색**: 정상 상태, 활성화
- **빨간색**: 알람, 고장, 비상
- **주황색**: 경고, 히터 동작
- **회색**: 비활성, 정지
- **노란색**: 주의, 설정 변경
- **파란색**: 정보, 냉각

## 단위 표기

- 온도: K (켈빈)
- 압력: bar
- 레벨: % (퍼센트)
- 유량: L/min (리터/분)
- 파워: W (와트)
- 시간: 초, 분, 시간

## 주의사항

1. 시스템 제어 전 반드시 현재 상태 확인
2. 알람 발생 시 원인 파악 후 조치
3. 설정 변경 시 반드시 저장 버튼 클릭
4. 비상정지 후에는 안전 점검 필수
5. 정기적인 알람 히스토리 확인 권장

## 문제 해결

### 화면이 업데이트되지 않는 경우:
- EPICS IOC 연결 상태 확인
- PV 연결 상태 확인
- 네트워크 연결 확인

### 제어 명령이 동작하지 않는 경우:
- 시스템 상태 확인 (제어 가능한 상태인지)
- 안전 인터락 상태 확인
- 권한 설정 확인

### 알람이 계속 발생하는 경우:
- 센서 값과 한계값 비교
- 센서 상태 확인
- 시스템 진단 정보 확인

## 연락처

기술 지원: [기술지원팀 연락처]
긴급 상황: [비상 연락처]